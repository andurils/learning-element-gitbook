# 2.2 npm scripts

> åŸæ–‡åœ°å€ï¼š [https://juejin.cn/post/6969258163136626725](https://juejin.cn/post/6969258163136626725)

`package.json`æ–‡ä»¶ä¸­`scripts`å±æ€§æŒ‡å®šäº†è¿è¡Œè„šæœ¬å‘½ä»¤çš„ npm å‘½ä»¤è¡Œç¼©å†™ï¼Œå„ä¸ªè„šæœ¬å¯ä»¥äº’ç›¸ç»„åˆä½¿ç”¨ï¼Œè¿™äº›è„šæœ¬è¦†ç›–æ•´ä¸ªé¡¹ç›®çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå¼€å‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²ï¼‰ã€‚

## è„šæœ¬ä½¿ç”¨æ³¨æ„äº‹é¡¹

### é€šé…ç¬¦

ç”±äº npm è„šæœ¬å°±æ˜¯ Shell è„šæœ¬ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨ Shell é€šé…ç¬¦ã€‚

```js
"lint": "jshint *.js"
"lint": "jshint **/*.js"
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`*` è¡¨ç¤ºä»»æ„æ–‡ä»¶åï¼Œ`**` è¡¨ç¤ºä»»æ„ä¸€å±‚å­ç›®å½•ã€‚

### æ‰§è¡Œé¡ºåº

å¦‚æœ npm è„šæœ¬é‡Œé¢éœ€è¦æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œéœ€è¦æ˜ç¡®å®ƒä»¬çš„æ‰§è¡Œé¡ºåºã€‚å¦‚æœæ˜¯ **å¹¶è¡Œæ‰§è¡Œ**ï¼ˆå³åŒæ—¶çš„å¹³è¡Œæ‰§è¡Œï¼‰ï¼Œä½¿ç”¨`&`ç¬¦å·ã€‚

```bash
npm run script1.js & npm run script2.js
```

å¦‚æœæ˜¯ **ç»§å‘æ‰§è¡Œ**ï¼ˆå³åªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œä½¿ç”¨ `&&` ç¬¦å·ã€‚

```bash
npm run script1.js && npm run script2.js
```

***

`element` é¡¹ç›®å®šä¹‰äº†å¾ˆå¤šè„šæœ¬ï¼ŒæŒ‰ç…§ç”¨é€”å¤§è‡´åˆ†ä¸ºé¡¹ç›®åŸºç¡€ã€æ–‡ä»¶æ„å»ºã€é¡¹ç›®å¼€å‘ ã€å‘å¸ƒéƒ¨ç½²ã€é¡¹ç›®æµ‹è¯•ç­‰ã€‚ è„šæœ¬å‘½ä»¤è°ƒç”¨ build ç›®å½•ä¸­çš„ä¼—å¤šæ–‡ä»¶,è‡ªåŠ¨å®Œæˆå¤§é‡é‡å¤æ€§å·¥ä½œ,ä»è€Œå‡å°‘äººä¸ºé”™è¯¯ã€æé«˜æ•ˆç‡ã€‚ä¸‹é¢å°†é€ä¸€åˆ†æè®²è§£è„šæœ¬å‘½ä»¤çš„åŠŸèƒ½å’Œä½œç”¨ã€‚

> å…³äº `/build` ç›®å½•ä¸‹æ–‡ä»¶åŠŸèƒ½ï¼Œæœ¬ç¯‡å¹…ä¸åšè®²è§£ï¼Œè¯¦è§åç»­æ–‡ç« ã€‚

## é¡¹ç›®åŸºç¡€

### npm run bootstrap

è‡ªåŠ¨ä¸‹è½½é¡¹ç›®æ‰€éœ€çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯é…ç½®é¡¹ç›®æ‰€éœ€çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚å®˜æ–¹æ¨èä½¿ç”¨ `yarn`ã€‚

```js
"bootstrap": "yarn || npm i"
```

### npm run clean

æ¸…é™¤æ‰“åŒ…/æµ‹è¯•ç”Ÿæˆçš„ç›®å½•åŠæ–‡ä»¶ï¼Œä¸»è¦æœ‰`lib`ç›®å½•ã€`test\unit\coverage`ç›®å½•ï¼ˆè·Ÿæµ‹è¯•ä»£ç è¦†ç›–ç‡æœ‰å…³ï¼Œè¯¦è§åæ–‡ï¼‰ä»¥åŠ`package\theme-chalk\lib`ç›®å½•ï¼ˆè·Ÿä¸»é¢˜æœ‰å…³ï¼Œè¯¦è§åæ–‡ï¼‰ã€‚

```js
"clean": "rimraf lib &&
          rimraf packages/*/lib &&
          rimraf test/**/coverage"
```

> éœ€è¦å®‰è£… `rimraf` åŒ…,ç”¨äºé€’å½’åˆ é™¤ç›®å½•æ‰€æœ‰æ–‡ä»¶ã€‚

### npm run eslint ä»£ç è´¨é‡æ£€æŸ¥

åŸºäº `.eslintrc` å’Œ `.eslintignore` æ–‡ä»¶é…ç½®ï¼Œè°ƒç”¨ `eslint` æ£€æµ‹ä»£ç è§„èŒƒã€‚`--quiet`å‚æ•°å…æŠ¥å‘Šé”™è¯¯,ç¦æ­¢æŠ¥å‘Šè­¦å‘Šã€‚

```js
"lint": "eslint src/**/* test/**/* packages/**/* build/**/* --quiet"
```

é¡¹ç›®ä½¿ç”¨è‡ªå·±å°è£…çš„è§„åˆ™é…ç½® `eslint-config-elemefe` , é…ç½®ä½¿ç”¨è¯·å‚è€ƒå‰æ–‡ [ä»£ç é£æ ¼æ£€æŸ¥å’Œæ ¼å¼åŒ–é…ç½®ï¼ˆESlint ï¼† Prettierï¼‰](https://juejin.cn/post/6951808773354684447#heading-4)ã€‚

```json
{
  "extends": "elemefe"
}
```

## æ–‡ä»¶æ„å»º

### npm run i18n

æ‰§è¡Œ `build/bin/i18n.js` åŸºäº `examples/i18n/page.json`é¡µé¢å¤šè¯­è¨€é…ç½®å’Œ `examples/pages/template` ç›®å½•ä¸‹çš„æ‰€æœ‰æ¨¡ç‰ˆæ–‡ä»¶ï¼Œç”Ÿæˆ `zh-CN`ã€`en-US`ã€`es`ã€`fr-FR`ç­‰å››ç§è¯­è¨€çš„ç½‘ç«™`.vue`æ–‡ä»¶ã€‚

```js
"i18n": "node build/bin/i18n.js",
```

### npm run build:file

è¯¥å‘½ä»¤ä¸»è¦ç”¨äºæ–‡ä»¶çš„è‡ªåŠ¨åŒ–ç”Ÿæˆï¼Œå…¶å¤šä¸ªä»»åŠ¡æ˜¯ **å¹¶è¡Œæ‰§è¡Œ**ã€‚

* æ‰§è¡Œ `build/bin/iconInit.js` ç”Ÿæˆ `examples/icon.json` å›¾æ ‡é›†åˆæ–‡ä»¶ã€‚
* æ‰§è¡Œ `build/bin/build-entry.js` ç”Ÿæˆ `src/index.js` ç»„ä»¶åº“å…¥å£æ–‡ä»¶ã€‚
* æ‰§è¡Œ `build/bin/i18n.js` ç”Ÿæˆå®˜ç½‘çš„å¤šè¯­è¨€ç½‘ç«™æ–‡ä»¶ã€‚
* æ‰§è¡Œ `build/bin/version.js` ç”Ÿæˆ `examples/version.json` è®°å½•é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯ï¼Œç”¨äºç½‘ç«™ç‰ˆå¤´éƒ¨å¯¼èˆªç‰ˆæœ¬åˆ‡æ¢ã€‚

```js
"build:file": "node build/bin/iconInit.js &
               node build/bin/build-entry.js &
               node build/bin/i18n.js &
               node build/bin/version.js"
```

### npm run build:theme

è¯¥å‘½ä»¤ä¸»è¦ç”¨äºé¡¹ç›®çš„ä¸»é¢˜å’Œæ ·å¼ç”Ÿæˆã€‚

1. æ‰§è¡Œ `build/bin/gen-cssfile` ç”Ÿæˆ `packages/theme-chalk/index.scss` æ ·å¼æ€»å…¥å£æ–‡ä»¶ã€‚å…¨é‡å¼•å…¥ç»„ä»¶æ—¶ï¼Œå¼•ç”¨æ”¹æ ·å¼å¦‚ä¸‹ `import 'packages/theme-chalk/src/index.scss'`ã€‚
2. é‡‡ç”¨ `gulp` è¿›è¡Œæ ·å¼æ„å»ºï¼Œå°†`packages/theme-chalk/src`ä¸‹çš„ `scss` æ–‡ä»¶è½¬æ¢æˆ `css` æ–‡ä»¶ï¼Œè¾“å‡ºè‡³`packages/theme-chalk/src/lib`ç›®å½•ä¸‹;å°†`packages/theme-chalk/src/fonts`ä¸‹çš„å­—ä½“æ–‡ä»¶å‹ç¼©å¤„ç†ï¼Œè¾“å‡ºè‡³ `packages/theme-chalk/src/lib/fonts` ç›®å½•ä¸‹ã€‚
3. å°†æ„å»ºå†…å®¹ `packages/theme-chalk/lib` æ‹·è´åˆ° `lib/theme-chalk` ä¸‹ã€‚å‰é¢ `sytle` å±æ€§é…ç½®çš„è·¯å¾„æ–‡ä»¶ `lib/theme-chalk/index.css` å°±æ˜¯è¿™æ ·ç”Ÿæˆçš„ã€‚

```js
"build:theme": "node build/bin/gen-cssfile &&
                gulp build --gulpfile packages/theme-chalk/gulpfile.js &&
                cp-cli packages/theme-chalk/lib lib/theme-chalk",
```

> éœ€è¦å®‰è£… `cp-cli` åŒ…,ç”¨äºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤åˆ¶,æ— éœ€æ‹…å¿ƒè·¨å¹³å°é—®é¢˜ã€‚

### npm run build:utils

è¯¥å‘½ä»¤ä½œç”¨æŠŠ `src` ç›®å½•ä¸‹é™¤äº† `src/index.js` å…¥å£æ–‡ä»¶å¤–çš„å…¶ä»–æ–‡ä»¶é€šè¿‡ `babel` è½¬è¯‘åï¼Œè¾“å‡ºè‡³ `lib` æ–‡ä»¶å¤¹ä¸‹ã€‚

```js
"build:utils": "cross-env BABEL_ENV=utils babel src --out-dir lib --ignore src/index.js",
```

> éœ€è¦å®‰è£… `cross-env` åŒ…,æ˜¯ä¸€æ¬¾è¿è¡Œè·¨å¹³å°è®¾ç½®å’Œä½¿ç”¨ç¯å¢ƒå˜é‡çš„è„šæœ¬ï¼Œä¸åŒå¹³å°ä½¿ç”¨å”¯ä¸€æŒ‡ä»¤ï¼Œæ— éœ€æ‹…å¿ƒè·¨å¹³å°é—®é¢˜ã€‚

### npm run build:umd

è¯¥å‘½ä»¤ä½œç”¨æ˜¯æ‰§è¡Œ `build/bin/build-locale.js` é€šè¿‡ `babel` å¤„ç† `src/locale/lang` ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç”Ÿæˆ `umd` æ ¼å¼çš„æ–‡ä»¶ï¼Œè¾“å‡ºè‡³ `lib/umd/locale` ç›®å½•ä¸‹ã€‚

```js
"build:umd": "node build/bin/build-locale.js",
```

## é¡¹ç›®å¼€å‘

### npm run dev

è¯¥å‘½ä»¤ç”¨äºè¿è¡Œç»„ä»¶åº“çš„æœ¬åœ°å¼€å‘ç¯å¢ƒã€‚

1. æ‰§è¡Œå‘½ä»¤`npm run bootstrap` é…ç½®é¡¹ç›®æ‰€éœ€çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚
2. æ‰§è¡Œå‘½ä»¤`npm run build:file` è¯¦è§£è§å‰æ–‡ï¼Œæ„å»ºé¡¹ç›®å®˜ç½‘ç›¸å…³æ–‡ä»¶ã€‚
3. `webpack-dev-server` æä¾›ä¸€ä¸ªæœ¬åœ°æœåŠ¡(serve) å¹¶è¿è¡Œé¡¹ç›®ç½‘ç«™(æ‰“åŒ…è§„åˆ™é…ç½® `build/webpack.demo.js`);åŒæ—¶æ‰§è¡Œ`build/bin/template.js`æ–‡ä»¶å¯åŠ¨ç›‘å¬`examples/pages/template`ç›® å½•ä¸‹æ¨¡æ¿æ–‡ä»¶ï¼Œè‹¥å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œåˆ™é‡æ–°ç”Ÿæˆç½‘ç«™æ–‡ä»¶ã€‚ webpack-dev-server å…·æœ‰ live reloading åŠŸèƒ½,ç½‘ç«™å†…å®¹ä¼šå®æ—¶é‡æ–°åŠ è½½ã€‚

```js
"dev": "npm run bootstrap &&
        npm run build:file &&
            cross-env NODE_ENV=development webpack-dev-server --config build/webpack.demo.js &
            node build/bin/template.js",
```

### npm run dev:play

è¯¥å‘½ä»¤ç”¨äºç»„ä»¶åº“å¼€å‘ä¸­çš„åŠŸèƒ½å±•ç¤ºï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾ã€‚

1. æ‰§è¡Œå‘½ä»¤`npm run build:file` è¯¦è§£è§å‰æ–‡ï¼Œæ„å»ºé¡¹ç›®å®˜ç½‘ç›¸å…³æ–‡ä»¶ã€‚
2. ç”±äºé…ç½®äº†å¦‚ä¸‹ç¯å¢ƒå˜é‡`NODE_ENV=development PLAY_ENV=true`,å¯ä»¥åœ¨`build/webpack.demo.js`æ‰“åŒ…æ–‡ä»¶ä¸­çœ‹åˆ°å…¥å£æ–‡ä»¶`examples/play.js`, `play.js` å¼•ç”¨ `examples/play/index.vue`, å¯ä»¥å¼•å…¥ç»„ä»¶åº“ä»»æ„ç»„ä»¶ç”¨äºåŠŸèƒ½å±•ç¤ºã€‚

```js
"dev:play": "npm run build:file &&
            cross-env NODE_ENV=development PLAY_ENV=true webpack-dev-server --config build/webpack.demo.js",
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1166e9efd60c4e748eddc4f73e1ea4dc\~tplv-k3u1fbpfcp-watermark.image)

## å‘å¸ƒéƒ¨ç½²

### npm run deploy:build

è¯¥å‘½ä»¤ä½œç”¨ä¸»è¦æ˜¯æ‰“åŒ…æ„å»ºé¡¹ç›®å®˜ç½‘å†…å®¹ï¼Œä¸ºç½‘ç«™éƒ¨ç½²åšå‡†å¤‡ã€‚

1. æ‰§è¡Œå‘½ä»¤`npm run build:file` è¯¦è§£è§å‰æ–‡ï¼Œæ„å»ºé¡¹ç›®å®˜ç½‘ç›¸å…³æ–‡ä»¶ã€‚
2. `webpack --config build/webpack.demo.js` åŸºäº `production` æ¨¡å¼ï¼Œæ‰“åŒ…ç”Ÿæˆå†…å®¹è¾“å‡ºè‡³`examples/element-ui/`ç›®å½•ä¸‹ã€‚
3. `echo element.eleme.io>>examples/element-ui/CNAME` å¾€`examples/element-ui/CNAME`æ–‡ä»¶ä¸­å†™å…¥`element.eleme.io` ã€‚[Github Docs / Managing a custom domain for your GitHub Pages site](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)

```js
"deploy:build": "npm run build:file &&
                 cross-env NODE_ENV=production webpack --config build/webpack.demo.js &&
                 echo element.eleme.io>>examples/element-ui/CNAME"
```

### npm run deploy:extension

è¯¥å‘½ä»¤ä½œç”¨ä¸»è¦æ˜¯æ‰“åŒ…æ„å»ºä¸»é¢˜ç¼–è¾‘å™¨çš„ chorme æ’ä»¶é¡¹ç›®--`Element Theme Roller` [å®˜æ–¹å•†åŸåœ°å€](https://chrome.google.com/webstore/detail/element-theme-roller/lifkjlojflekabbmlddfccdkphlelmim?hl=zh-CN\&utm\_source=chrome-ntp-launcher) ã€‚åŸºäº `production` æ¨¡å¼æ‰“åŒ…ç”Ÿæˆå†…å®¹è¾“å‡ºè‡³ `examples/extension` ç›®å½•ä¸‹ã€‚

```js
"deploy:extension": "cross-env NODE_ENV=production webpack --config build/webpack.extension.js",
```

ä½¿ç”¨è¯¥æ’ä»¶å¯ä»¥è‡ªå®šä¹‰å…¨å±€å˜é‡å’Œç»„ä»¶çš„æ‰€æœ‰è®¾è®¡æ ‡è®°ï¼Œå¹¶å®æ—¶é¢„è§ˆæ–°ä¸»é¢˜å¹¶åŸºäºæ–°ä¸»é¢˜ç”Ÿæˆå®Œæ•´çš„æ ·å¼åŒ…ï¼Œä»¥ä¾›ç›´æ¥ä¸‹è½½

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4fc1cea94d245bf8beb1e571afc3fd4\~tplv-k3u1fbpfcp-watermark.image)

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09c138e7a00843e98ed1d295adb9a58b\~tplv-k3u1fbpfcp-watermark.image)

### ğŸ‘‰ npm run dist â­

è¯¥å‘½ä»¤ä½œç”¨ä¸»è¦æ˜¯æ„å»ºç»„ä»¶åº“ã€‚

1. æ‰§è¡Œå‘½ä»¤`npm run clean`,è¯¦è§ä¸Šæ–‡;
2. æ‰§è¡Œå‘½ä»¤`npm run build:file`,è¯¦è§ä¸Šæ–‡;
3. æ‰§è¡Œå‘½ä»¤`npm run lint`,è¯¦è§ä¸Šæ–‡;
4. æ‰§è¡Œæ‰“åŒ…`webpack --config build/webpack.conf.js`,å…¥å£æ–‡ä»¶ `src/index.js` ä»¥ `umd` æ ¼å¼è¾“å‡ºåˆ° `lib/index.js`;
5. æ‰§è¡Œæ‰“åŒ…`webpack --config build/webpack.common.js`,å…¥å£æ–‡ä»¶ `src/index.js` ä»¥`commonjs2`æ ¼å¼è¾“å‡ºåˆ° `lib/element-ui.common.js`;
6. æ‰§è¡Œæ‰“åŒ…`webpack --config build/webpack.component.js`,å…¥å£æ–‡ä»¶ `components.json`,å°†`packages`ç›®å½•ä¸‹çš„ç»„ä»¶ï¼Œä»¥`commonjs2`æ ¼å¼åˆ†åˆ«è¾“å‡ºåˆ°`lib`ç›®å½•,ç”¨äºæŒ‰éœ€å¼•å…¥;
7. æ‰§è¡Œå‘½ä»¤`npm run build:utils`,è¯¦è§ä¸Šæ–‡;
8. æ‰§è¡Œå‘½ä»¤`npm run build:umd`,è¯¦è§ä¸Šæ–‡;
9. æ‰§è¡Œå‘½ä»¤`npm run build:theme`,è¯¦è§ä¸Šæ–‡ã€‚

```js
"dist": "npm run clean &&
         npm run build:file &&
         npm run lint &&
         webpack --config build/webpack.conf.js &&
         webpack --config build/webpack.common.js &&
         webpack --config build/webpack.component.js &&
         npm run build:utils &&
         npm run build:umd &&
         npm run build:theme",
```

### ğŸ‘‰ npm run pub â­

```js
"pub": "npm run bootstrap &&
        sh build/git-release.sh &&
        sh build/release.sh &&
        node build/bin/gen-indices.js",
```

è¯¥å‘½ä»¤ä½œç”¨ä¸»è¦æ˜¯ç»„ä»¶åº“çš„å‘å¸ƒã€ä»£ç ç®¡ç†ã€‚

1. æ‰§è¡Œå‘½ä»¤`npm run bootstrap`,è¯¦è§ä¸Šæ–‡;
2. è¿è¡Œ shell è„šæœ¬`sh build/git-release.sh`ï¼Œæ£€æŸ¥ä»£ç  `dev` åˆ†æ”¯æ˜¯å¦å­˜åœ¨å†²çª(No conflicts);
3. è¿è¡Œ shell è„šæœ¬`sh build/release.sh`,åˆå¹¶ dev åˆ†æ”¯åˆ° master åˆ†æ”¯ã€æ›´æ–°ç‰ˆæœ¬å·ã€å‘å¸ƒä¸»é¢˜ã€push ä»£ç åˆ°è¿œç¨‹ä»“åº“ã€å‘å¸ƒç»„ä»¶åº“è‡³ NPM;
4. æ‰§è¡Œæ–‡ä»¶`node build/bin/gen-indices.js`,æä¾› `algoliasearch` æœç´¢åŠŸèƒ½ï¼Œéœ€è¦æŠŠ `examples/docs` ç›®å½•ä¸‹ `.md` æ–‡ä»¶å†…å®¹æ ¼å¼åŒ–åä¸Šä¼  `algolia`,æ•ˆæœè¯¦è§ä¸‹å›¾ ğŸ‘‡ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76e5f91d176c48d0b4dd12f3be764318\~tplv-k3u1fbpfcp-watermark.image)

> ğŸ’â€â™‚ï¸ åœ¨ `2.15.x` ç‰ˆæœ¬ï¼Œ`pub` å‘½ä»¤ç§»é™¤äº†æœ€åä¸€æ¡ä»»åŠ¡æŒ‡ä»¤`sh build/deploy-faas.sh`ï¼Œç”¨äºç«™ç‚¹ [https://element.eleme.io](https://element.eleme.io) çš„ `faas deploy`ã€‚

## æµ‹è¯•

å®ç°é¡¹ç›®è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚

* karma æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ç®¡ç†å·¥å…·(Test Runner)ã€‚
* Mocha æ˜¯è¿è¡Œåœ¨ Node.js å’Œæµè§ˆå™¨ä¸Šçš„åŠŸèƒ½ä¸°å¯Œçš„ JavaScript æµ‹è¯•æ¡†æ¶ã€‚
* Chai æ˜¯ä¸€ä¸ªç”¨äº Node.js å’Œæµè§ˆå™¨çš„ BDD/TDD æ–­è¨€åº“ï¼Œå¯ä»¥ä¸ä»»ä½• JavaScript æµ‹è¯•æ¡†æ¶ä¾¿æ·é…å¯¹ã€‚
* Sinon.JS ç”¨äºå¯¹ JavaScript éš”ç¦»æµ‹è¯• spy, stub å’Œ mockã€‚é€‚ç”¨äºä»»ä½•å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚

æµ‹è¯•è„šæœ¬å‘½åæ–¹å¼ä¸º `[ç»„ä»¶å].spec.js` , ç»Ÿä¸€æ”¾åœ¨ `test/unit/specs/` ç›®å½•ä¸‹ã€‚å¦‚æœæµ‹è¯•æˆåŠŸï¼Œ`karma-coverage` ä¼šåœ¨ `test/unit/coverage` æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡ç»“æœçš„ç½‘é¡µã€‚

### npm run test

```js
"test": "npm run lint &&
         npm run build:theme &&
         cross-env CI_ENV=/dev/ BABEL_ENV=test karma start test/unit/karma.conf.js --single-run",
```

è¯¥å‘½ä»¤ç”¨äºå¯åŠ¨é¡¹ç›®æµ‹è¯•ï¼Œè®¾ç½®äº†å‚æ•° `--single-run` æ‰§è¡Œä¸€æ¬¡æµ‹è¯•ä¹‹åï¼Œkarma ä¼šè‡ªåŠ¨åœæ‰ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37a2d26481014b7c8e7e0d5e477e2ad5\~tplv-k3u1fbpfcp-watermark.image)

### npm run test:watch

```js
"test:watch": "npm run build:theme &&
               cross-env BABEL_ENV=test karma start test/unit/karma.conf.js"
```

è¯¥å‘½ä»¤ç”¨äºå¯åŠ¨é¡¹ç›®æµ‹è¯•ï¼Œæ‰§è¡Œç»“æŸåä¼šç»§ç»­ç›‘æµ‹æ–‡ä»¶æ˜¯å¦å˜æ›´ï¼Œè‹¥å‘ç”Ÿå˜æ›´ï¼Œä¼šé‡æ–°æ‰§è¡Œä¸€æ¬¡æµ‹è¯•ã€‚ ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f07ef8b369a24fac8e91108520816bca\~tplv-k3u1fbpfcp-watermark.image)

## å…³è”é˜…è¯»

ç‚¹å‡»ä»¥ä¸‹é“¾æ¥ï¼Œå¯ä»¥å¿«é€ŸæŸ¥çœ‹æœ¬ç³»åˆ—å…¶ä»–æ–‡ç« ï¼š\
[ä¸“æ /Element 2.X æºç å­¦ä¹ ](https://juejin.cn/column/6961321064110489631)

ğŸ‘‡ é¡¹ç›®å·¥ç¨‹åŒ–ç³»åˆ—æ–‡ç« é“¾æ¥å¦‚ä¸‹ï¼Œæ¨èæŒ‰ç…§é¡ºåºé˜…è¯»æ–‡ç«  ğŸ‘‡ã€‚

1ï¸âƒ£ [æºç å‰–æä¹‹å·¥ç¨‹åŒ–ï¼šé¡¹ç›®æ¦‚è§ˆã€package.jsonã€npm script](https://juejin.cn/post/6969258163136626725)\
2ï¸âƒ£ [æºç å‰–æä¹‹å·¥ç¨‹åŒ–ï¼šé¡¹ç›®æ„å»ºã€MD è§£æ](https://juejin.cn/post/6969933702759940133)\
3ï¸âƒ£ [æºç å‰–æä¹‹å·¥ç¨‹åŒ–ï¼šæ‰“åŒ…é…ç½®](https://juejin.cn/post/6970691644114862111/)\
4ï¸âƒ£ [æºç å‰–æä¹‹å·¥ç¨‹åŒ–ï¼šå‘å¸ƒéƒ¨ç½²ã€æŒç»­é›†æˆ](https://juejin.cn/post/6971054455139598366/)\
5ï¸âƒ£ [æºç å‰–æä¹‹å·¥ç¨‹åŒ–ï¼šä¸»é¢˜æ„å»ºã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€ä»£ç è´¨é‡æ£€æŸ¥ã€ç±»å‹å£°æ˜](https://juejin.cn/post/6971434343516340238)\
6ï¸âƒ£ [æºç å‰–æä¹‹å·¥ç¨‹åŒ–ï¼šé¡¹ç›®ç½‘ç«™](https://juejin.cn/post/6972180649625157645)\
7ï¸âƒ£ [æºç å‰–æä¹‹å·¥ç¨‹åŒ–ï¼šå‘½ä»¤ä¹‹å›¾è§£](https://juejin.cn/post/6991347082552573965)
